"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.servicePathFromSwagger = exports.apiBusinessHubMetadata = void 0;
/**
 * @internal
 */
function apiBusinessHubMetadata(swagger) {
    var _a;
    if (!swagger || !(swagger === null || swagger === void 0 ? void 0 : swagger.basePath)) {
        return undefined;
    }
    const metadata = {
        communicationScenario: communicationScenario(swagger),
        url: `https://api.sap.com/api/${apiHubServiceName(swagger)}`
    };
    if (((_a = swagger.externalDocs) === null || _a === void 0 ? void 0 : _a.description) === 'Business Documentation') {
        metadata.businessDocumentationUrl = swagger.externalDocs.url;
    }
    return metadata;
}
exports.apiBusinessHubMetadata = apiBusinessHubMetadata;
function communicationScenario(swagger) {
    if (!swagger['x-sap-ext-overview']) {
        return null;
    }
    return (swagger['x-sap-ext-overview']
        .find(x => x.name === 'Communication Scenario')
        .values.map(x => x.text)
        .join(', ') || null);
}
function apiHubServiceName(swagger) {
    if (!swagger.basePath) {
        throw Error('The swagger-parser base path is undefined.');
    }
    return swagger.basePath.split('/').slice(-1)[0];
}
/**
 * @internal
 */
function servicePathFromSwagger(swagger) {
    return swagger === null || swagger === void 0 ? void 0 : swagger.basePath;
}
exports.servicePathFromSwagger = servicePathFromSwagger;
//# sourceMappingURL=swagger-util.js.map